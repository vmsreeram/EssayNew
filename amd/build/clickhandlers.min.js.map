{"version":3,"file":"clickhandlers.min.js","sources":["../src/clickhandlers.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * OnClick handlers are defined here\n * These functions will call functions in pdfannotate.js.\n *\n * @subpackage essayannotate\n * @copyright  2024 IIT Palakkad\n * @copyright  based on work done by Ravisha Hesh {@link https://github.com/RavishaHesh/PDFJsAnnotations/tree/master}\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n\n// This function calls PDFAnnotate function defined in pdfannotate.js\n// fileurl has been assigned its correct value in annotator.php file\n\nimport $ from 'jquery';\nimport PDFAnnotate from 'qtype_essayannotate/pdfannotate';\n\n/**\n * Changes the active tool based on the event target.\n *\n * @param {Event} event - The event object.\n */\nfunction changeActiveTool(event) {\n    event.preventDefault();\n    var element = $(event.target).hasClass(\"tool-button\")\n    ? $(event.target)\n    : $(event.target).parents(\".tool-button\").first();\n    $(\".tool-button.active\").removeClass(\"active\");\n    $(element).addClass(\"active\");\n}\n\n/**\n * Enables the selector tool in the PDF.\n *\n * @param {Event} event - The event object.\n * @param {PDFAnnotate} pdf - The PDFAnnotate instance.\n */\nfunction enableSelector(event,pdf) {\n    event.preventDefault();\n    changeActiveTool(event);\n    pdf.enableSelector();\n}\n\n/**\n * Enables the pencil tool in the PDF.\n *\n * @param {Event} event - The event object.\n * @param {PDFAnnotate} pdf - The PDFAnnotate instance.\n */\nfunction enablePencil(event,pdf) {\n    event.preventDefault();\n    changeActiveTool(event);\n    pdf.enablePencil();\n}\n\n/**\n * Enables the add text tool in the PDF.\n *\n * @param {Event} event - The event object.\n * @param {PDFAnnotate} pdf - The PDFAnnotate instance.\n */\nfunction enableAddText(event,pdf) {\n    event.preventDefault();\n    changeActiveTool(event);\n    pdf.enableAddText();\n}\n\n/**\n * Enables the rectangle tool in the PDF.\n *\n * @param {Event} event - The event object.\n * @param {PDFAnnotate} pdf - The PDFAnnotate instance.\n */\nfunction enableRectangle(event,pdf) {\n    event.preventDefault();\n    changeActiveTool(event);\n    pdf.enableRectangle();\n}\n\n/**\n * Deletes the selected object in the PDF.\n *\n * @param {Event} event - The event object.\n * @param {PDFAnnotate} pdf - The PDFAnnotate instance.\n */\nfunction deleteSelectedObject(event,pdf) {\n    event.preventDefault();\n    pdf.deleteSelectedObject();\n}\n\n/**\n * Saves the PDF.\n *\n * @param {Event} event - The event object.\n * @param {PDFAnnotate} pdf - The PDFAnnotate instance.\n */\nfunction savePDF(event,pdf) {\n    event.preventDefault();\n    pdf.savePdf();        //Changes made by Asha and Parvathy: Removed a parameter of the function\n}\n\n//Change the color and font size to currently selected color and font size respectively in the UI\n\nexport const init =(fileurl) =>{\n    // eslint-disable-next-line no-console\n    window.console.log(\"ClickHandler :: Init\");\n\n    window.alert(\"sometext clickhandler\");\n    window.console.log(PDFAnnotate);\n    var pdf = new PDFAnnotate(\"pdf-container\", fileurl, {\n        onPageUpdated(page, oldData, newData) { // eslint-disable-line no-unused-vars\n        },\n        ready() {\n        },\n        scale: 1.5,\n        pageImageCompression: \"SLOW\", // FAST, MEDIUM, SLOW(Helps to control the new PDF file size)\n    });\n    $(function () {\n        $('.color-tool').click(function () {\n            $('.color-tool.active').removeClass('active');\n            $(this).addClass('active');\n            var color = $(this).get(0).style.backgroundColor;\n            pdf.setColor(color);\n        });\n\n        $('#font-size').change(function () {\n            var font_size = $(this).val();\n            pdf.setFontSize(font_size);\n        });\n    });\n\n    const pencilButton = document.getElementById('pencil');\n    pencilButton.addEventListener('click', (event) => {\n        enablePencil(event,pdf);\n    });\n    const selectorButton = document.getElementById('select');\n    selectorButton.addEventListener('click', (event) => {\n        enableSelector(event,pdf);\n    });\n    const addTextButton = document.getElementById('text');\n    addTextButton.addEventListener('click', (event) => {\n        enableAddText(event,pdf);\n    });\n    const rectangleButton = document.getElementById('rectangle');\n    rectangleButton.addEventListener('click', (event) => {\n        enableRectangle(event,pdf);\n    });\n    const deleteButton = document.getElementById('deletebtn');\n    deleteButton.addEventListener('click', (event) => {\n        deleteSelectedObject(event,pdf);\n    });\n    const saveButton = document.getElementById('savebtn');\n    saveButton.addEventListener('click', (event) => {\n        savePDF(event,pdf);\n    });\n};"],"names":["_interopRequireDefault","obj","__esModule","default","changeActiveTool","event","preventDefault","element","$","target","hasClass","parents","first","removeClass","addClass","_jquery","_pdfannotate","_exports","init","fileurl","window","console","log","alert","PDFAnnotate","pdf","onPageUpdated","page","oldData","newData","ready","scale","pageImageCompression","click","this","color","get","style","backgroundColor","setColor","change","font_size","val","setFontSize","document","getElementById","addEventListener","enablePencil","enableSelector","enableAddText","enableRectangle","deleteSelectedObject","savePdf","savePDF"],"mappings":"2IA8B0D,SAAAA,uBAAAC,YAAAA,KAAAA,IAAAC,WAAAD,KAAAE,QAAAF;;;;;;;;;KAO1D,SAASG,iBAAiBC,OACtBA,MAAMC,iBACN,IAAIC,SAAU,EAAAC,iBAAEH,MAAMI,QAAQC,SAAS,gBACrC,EAAAF,iBAAEH,MAAMI,SACR,EAAAD,iBAAEH,MAAMI,QAAQE,QAAQ,gBAAgBC,SAC1C,EAAAJ,iBAAE,uBAAuBK,YAAY,WACrC,EAAAL,iBAAED,SAASO,SAAS,uFAdxBC,QAAAf,uBAAAe,SACAC,aAAAhB,uBAAAgB,cA4IEC,SAAAC,KApDkBC,UAEhBC,OAAOC,QAAQC,IAAI,wBAEnBF,OAAOG,MAAM,yBACbH,OAAOC,QAAQC,IAAIE,sBACnB,IAAIC,IAAM,IAAID,qBAAY,gBAAiBL,QAAS,CAChDO,aAAAA,CAAcC,KAAMC,QAASC,WAE7BC,KAAAA,KAEAC,MAAO,IACPC,qBAAsB,UAE1B,EAAAxB,kBAAE,YACE,EAAAA,iBAAE,eAAeyB,OAAM,YACnB,EAAAzB,iBAAE,sBAAsBK,YAAY,WACpC,EAAAL,iBAAE0B,MAAMpB,SAAS,UACjB,IAAIqB,OAAQ,EAAA3B,iBAAE0B,MAAME,IAAI,GAAGC,MAAMC,gBACjCb,IAAIc,SAASJ,WAGjB,EAAA3B,iBAAE,cAAcgC,QAAO,WACnB,IAAIC,WAAY,EAAAjC,iBAAE0B,MAAMQ,MACxBjB,IAAIkB,YAAYF,iBAIHG,SAASC,eAAe,UAChCC,iBAAiB,SAAUzC,SAnF5C,SAAsBA,MAAMoB,KACxBpB,MAAMC,iBACNF,iBAAiBC,OACjBoB,IAAIsB,eAiFAA,CAAa1C,MAAMoB,IAAI,IAEJmB,SAASC,eAAe,UAChCC,iBAAiB,SAAUzC,SAnG9C,SAAwBA,MAAMoB,KAC1BpB,MAAMC,iBACNF,iBAAiBC,OACjBoB,IAAIuB,iBAiGAA,CAAe3C,MAAMoB,IAAI,IAEPmB,SAASC,eAAe,QAChCC,iBAAiB,SAAUzC,SA/E7C,SAAuBA,MAAMoB,KACzBpB,MAAMC,iBACNF,iBAAiBC,OACjBoB,IAAIwB,gBA6EAA,CAAc5C,MAAMoB,IAAI,IAEJmB,SAASC,eAAe,aAChCC,iBAAiB,SAAUzC,SAvE/C,SAAyBA,MAAMoB,KAC3BpB,MAAMC,iBACNF,iBAAiBC,OACjBoB,IAAIyB,kBAqEAA,CAAgB7C,MAAMoB,IAAI,IAETmB,SAASC,eAAe,aAChCC,iBAAiB,SAAUzC,SA/D5C,SAA8BA,MAAMoB,KAChCpB,MAAMC,iBACNmB,IAAI0B,uBA8DAA,CAAqB9C,MAAMoB,IAAI,IAEhBmB,SAASC,eAAe,WAChCC,iBAAiB,SAAUzC,SAxD1C,SAAiBA,MAAMoB,KACnBpB,MAAMC,iBACNmB,IAAI2B,UAuDAC,CAAQhD,MAAMoB,IAAI,GACpB,CACJ"}