{"version":3,"file":"clickhandlers.min.js","sources":["../src/clickhandlers.js"],"sourcesContent":["/**\n * OnClick handlers are defined here\n * These functions will call functions in pdfannotate.js.\n *\n * @module     qtype_essayannotate/clickhandlers\n * @copyright  2024 IIT Palakkad\n * @copyright  based on work done by Ravisha Hesh {@link https://github.com/RavishaHesh/PDFJsAnnotations/tree/master}\n * @license    http://opensource.org/licenses/mit-license The MIT License\n * @author     Tausif Iqbal, Vishal Rao (IIT Palakkad)\n * @updatedby  Parvathy S Kumar, Asha Jose\n * @updatedby  Nideesh N, VM Sreeram\n *             Converted into AMD format, added event listeners for all the tools,\n *             removed unused onPageUpdated function, disabled save and exit button when clicked once\n */\n\n\n// This function calls PDFAnnotate function defined in pdfannotate.js\n// fileurl has been assigned its correct value in annotator.php file\ndefine(['jquery', 'qtype_essayannotate/pdfannotate'], function($, PDFAnnotate) {\n    /**\n     * Changes the active tool based on the event target.\n     *\n     * @param {Event} event - The event object.\n     */\n    function changeActiveTool(event) {\n        event.preventDefault();\n        var element = $(event.target).hasClass(\"tool-button\")\n        ? $(event.target)\n        : $(event.target).parents(\".tool-button\").first();\n        $(\".tool-button.active\").removeClass(\"active\");\n        $(element).addClass(\"active\");\n    }\n\n    /**\n     * Enables the selector tool in the PDF.\n     *\n     * @param {Event} event - The event object.\n     * @param {PDFAnnotate} pdf - The PDFAnnotate instance.\n     */\n    function enableSelector(event, pdf) {\n        event.preventDefault();\n        changeActiveTool(event);\n        pdf.enableSelector();\n    }\n\n    /**\n     * Enables the pencil tool in the PDF.\n     *\n     * @param {Event} event - The event object.\n     * @param {PDFAnnotate} pdf - The PDFAnnotate instance.\n     */\n    function enablePencil(event, pdf) {\n        event.preventDefault();\n        changeActiveTool(event);\n        pdf.enablePencil();\n    }\n\n    /**\n     * Enables the add text tool in the PDF.\n     *\n     * @param {Event} event - The event object.\n     * @param {PDFAnnotate} pdf - The PDFAnnotate instance.\n     */\n    function enableAddText(event, pdf) {\n        event.preventDefault();\n        changeActiveTool(event);\n        pdf.enableAddText();\n    }\n\n    /**\n     * Enables the rectangle tool in the PDF.\n     *\n     * @param {Event} event - The event object.\n     * @param {PDFAnnotate} pdf - The PDFAnnotate instance.\n     */\n    function enableRectangle(event, pdf) {\n        event.preventDefault();\n        changeActiveTool(event);\n        pdf.enableRectangle();\n    }\n\n    /**\n     * Deletes the selected object in the PDF.\n     *\n     * @param {Event} event - The event object.\n     * @param {PDFAnnotate} pdf - The PDFAnnotate instance.\n     */\n    function deleteSelectedObject(event, pdf) {\n        event.preventDefault();\n        pdf.deleteSelectedObject();\n    }\n\n    /**\n     * Saves the PDF.\n     *\n     * @param {Event} event - The event object.\n     * @param {PDFAnnotate} pdf - The PDFAnnotate instance.\n     */\n    function savePDF(event, pdf) {\n        document.getElementById('savebtn').setAttribute(\"disabled\", \"true\");\n        event.preventDefault();\n        pdf.savePdf(); // Changes made by Asha and Parvathy: Removed a parameter of the function\n    }\n\n    // Change the color and font size to currently selected color and font size respectively in the UI\n\n    return {\n        init: function(fileurl) {\n            var pdf = new PDFAnnotate.PDFAnnotate(\"pdf-container\", fileurl, {\n                ready: function() {}, // eslint-disable-line no-empty-function\n                scale: 1.5,\n                pageImageCompression: \"SLOW\", // FAST, MEDIUM, SLOW(Helps to control the new PDF file size)\n            });\n            if (typeof window !== 'undefined') {\n                window.pdf = pdf;\n            }\n            $(function() {\n                $('.color-tool').click(function() {\n                    $('.color-tool.active').removeClass('active');\n                    $(this).addClass('active');\n                    var color = $(this).get(0).style.backgroundColor;\n                    pdf.setColor(color);\n                });\n\n                $('#font-size').change(function() {\n                    var fontSize = $(this).val();\n                    pdf.setFontSize(fontSize);\n                });\n            });\n\n            const pencilButton = document.getElementById('pencil');\n            pencilButton.addEventListener('click', function(event) {\n                enablePencil(event, pdf);\n            });\n            const selectorButton = document.getElementById('select');\n            selectorButton.addEventListener('click', function(event) {\n                enableSelector(event, pdf);\n            });\n            const addTextButton = document.getElementById('text');\n            addTextButton.addEventListener('click', function(event) {\n                enableAddText(event, pdf);\n            });\n            const rectangleButton = document.getElementById('rectangle');\n            rectangleButton.addEventListener('click', function(event) {\n                enableRectangle(event, pdf);\n            });\n            const deleteButton = document.getElementById('deletebtn');\n            deleteButton.addEventListener('click', function(event) {\n                deleteSelectedObject(event, pdf);\n            });\n            const saveButton = document.getElementById('savebtn');\n            saveButton.addEventListener('click', function(event) {\n                savePDF(event, pdf);\n            });\n        }\n    };\n});\n"],"names":["define","$","PDFAnnotate","changeActiveTool","event","preventDefault","element","target","hasClass","parents","first","removeClass","addClass","init","fileurl","pdf","ready","scale","pageImageCompression","window","click","this","color","get","style","backgroundColor","setColor","change","fontSize","val","setFontSize","document","getElementById","addEventListener","enablePencil","enableSelector","enableAddText","enableRectangle","deleteSelectedObject","setAttribute","savePdf","savePDF"],"mappings":";;;;;;;;;;;;;;AAkBAA,2CAAO,CAAC,SAAU,oCAAoC,SAASC,EAAGC,aAM9D,SAASC,iBAAiBC,OACtBA,MAAMC,iBACN,IAAIC,QAAUL,EAAEG,MAAMG,QAAQC,SAAS,eACrCP,EAAEG,MAAMG,QACRN,EAAEG,MAAMG,QAAQE,QAAQ,gBAAgBC,QAC1CT,EAAE,uBAAuBU,YAAY,UACrCV,EAAEK,SAASM,SAAS,UA4ExB,MAAO,CACHC,KAAM,SAASC,SACX,IAAIC,IAAM,IAAIb,YAAYA,YAAY,gBAAiBY,QAAS,CAC5DE,MAAO,aACPC,MAAO,IACPC,qBAAsB,SAEJ,oBAAXC,SACPA,OAAOJ,IAAMA,KAEjBd,GAAE,WACEA,EAAE,eAAemB,OAAM,WACnBnB,EAAE,sBAAsBU,YAAY,UACpCV,EAAEoB,MAAMT,SAAS,UACjB,IAAIU,MAAQrB,EAAEoB,MAAME,IAAI,GAAGC,MAAMC,gBACjCV,IAAIW,SAASJ,UAGjBrB,EAAE,cAAc0B,QAAO,WACnB,IAAIC,SAAW3B,EAAEoB,MAAMQ,MACvBd,IAAIe,YAAYF,gBAIHG,SAASC,eAAe,UAChCC,iBAAiB,SAAS,SAAS7B,QAhFxD,SAAsBA,MAAOW,KACzBX,MAAMC,iBACNF,iBAAiBC,OACjBW,IAAImB,eA8EIA,CAAa9B,MAAOW,QAEDgB,SAASC,eAAe,UAChCC,iBAAiB,SAAS,SAAS7B,QAhG1D,SAAwBA,MAAOW,KAC3BX,MAAMC,iBACNF,iBAAiBC,OACjBW,IAAIoB,iBA8FIA,CAAe/B,MAAOW,QAEJgB,SAASC,eAAe,QAChCC,iBAAiB,SAAS,SAAS7B,QA5EzD,SAAuBA,MAAOW,KAC1BX,MAAMC,iBACNF,iBAAiBC,OACjBW,IAAIqB,gBA0EIA,CAAchC,MAAOW,QAEDgB,SAASC,eAAe,aAChCC,iBAAiB,SAAS,SAAS7B,QApE3D,SAAyBA,MAAOW,KAC5BX,MAAMC,iBACNF,iBAAiBC,OACjBW,IAAIsB,kBAkEIA,CAAgBjC,MAAOW,QAENgB,SAASC,eAAe,aAChCC,iBAAiB,SAAS,SAAS7B,QA5DxD,SAA8BA,MAAOW,KACjCX,MAAMC,iBACNU,IAAIuB,uBA2DIA,CAAqBlC,MAAOW,QAEbgB,SAASC,eAAe,WAChCC,iBAAiB,SAAS,SAAS7B,QArDtD,SAAiBA,MAAOW,KACpBgB,SAASC,eAAe,WAAWO,aAAa,WAAY,QAC5DnC,MAAMC,iBACNU,IAAIyB,UAmDIC,CAAQrC,MAAOW,SAI/B"}