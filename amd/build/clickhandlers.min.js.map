{"version":3,"file":"clickhandlers.min.js","sources":["../src/clickhandlers.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * OnClick handlers are defined here\n * These functions will call functions in pdfannotate.js.\n *\n * @subpackage essayannotate\n * @copyright  2024 IIT Palakkad\n * @copyright  based on work done by Ravisha Hesh {@link https://github.com/RavishaHesh/PDFJsAnnotations/tree/master}\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n\n// This function calls PDFAnnotate function defined in pdfannotate.js\n// fileurl has been assigned its correct value in annotator.php file\n\nimport $ from 'jquery';\nimport PDFAnnotate from 'qtype_essayannotate/pdfannotate';\n\n/**\n * Changes the active tool based on the event target.\n *\n * @param {Event} event - The event object.\n */\nfunction changeActiveTool(event) {\n    event.preventDefault();\n    var element = $(event.target).hasClass(\"tool-button\")\n    ? $(event.target)\n    : $(event.target).parents(\".tool-button\").first();\n    $(\".tool-button.active\").removeClass(\"active\");\n    $(element).addClass(\"active\");\n}\n\n/**\n * Enables the selector tool in the PDF.\n *\n * @param {Event} event - The event object.\n * @param {PDFAnnotate} pdf - The PDFAnnotate instance.\n */\nfunction enableSelector(event,pdf) {\n    event.preventDefault();\n    changeActiveTool(event);\n    pdf.enableSelector();\n}\n\n/**\n * Enables the pencil tool in the PDF.\n *\n * @param {Event} event - The event object.\n * @param {PDFAnnotate} pdf - The PDFAnnotate instance.\n */\nfunction enablePencil(event,pdf) {\n    event.preventDefault();\n    changeActiveTool(event);\n    pdf.enablePencil();\n}\n\n/**\n * Enables the add text tool in the PDF.\n *\n * @param {Event} event - The event object.\n * @param {PDFAnnotate} pdf - The PDFAnnotate instance.\n */\nfunction enableAddText(event,pdf) {\n    event.preventDefault();\n    changeActiveTool(event);\n    pdf.enableAddText();\n}\n\n/**\n * Enables the rectangle tool in the PDF.\n *\n * @param {Event} event - The event object.\n * @param {PDFAnnotate} pdf - The PDFAnnotate instance.\n */\nfunction enableRectangle(event,pdf) {\n    event.preventDefault();\n    changeActiveTool(event);\n    pdf.enableRectangle();\n}\n\n/**\n * Deletes the selected object in the PDF.\n *\n * @param {Event} event - The event object.\n * @param {PDFAnnotate} pdf - The PDFAnnotate instance.\n */\nfunction deleteSelectedObject(event,pdf) {\n    event.preventDefault();\n    pdf.deleteSelectedObject();\n}\n\n/**\n * Saves the PDF.\n *\n * @param {Event} event - The event object.\n * @param {PDFAnnotate} pdf - The PDFAnnotate instance.\n */\nfunction savePDF(event,pdf) {\n    event.preventDefault();\n    pdf.savePdf();        //Changes made by Asha and Parvathy: Removed a parameter of the function\n}\n\n//Change the color and font size to currently selected color and font size respectively in the UI\n\nexport const init =(fileurl) =>{\n    // eslint-disable-next-line no-console\n    window.console.log(\"ClickHandler :: Init\");\n\n    window.alert(\"sometext clickhandler\");\n\n    var pdf = new PDFAnnotate(\"pdf-container\", fileurl, {\n        onPageUpdated(page, oldData, newData) { // eslint-disable-line no-unused-vars\n        },\n        ready() {\n        },\n        scale: 1.5,\n        pageImageCompression: \"SLOW\", // FAST, MEDIUM, SLOW(Helps to control the new PDF file size)\n    });\n    $(function () {\n        $('.color-tool').click(function () {\n            $('.color-tool.active').removeClass('active');\n            $(this).addClass('active');\n            var color = $(this).get(0).style.backgroundColor;\n            pdf.setColor(color);\n        });\n\n        $('#font-size').change(function () {\n            var font_size = $(this).val();\n            pdf.setFontSize(font_size);\n        });\n    });\n\n    const pencilButton = document.getElementById('pencil');\n    pencilButton.addEventListener('click', (event) => {\n        enablePencil(event,pdf);\n    });\n    const selectorButton = document.getElementById('select');\n    selectorButton.addEventListener('click', (event) => {\n        enableSelector(event,pdf);\n    });\n    const addTextButton = document.getElementById('text');\n    addTextButton.addEventListener('click', (event) => {\n        enableAddText(event,pdf);\n    });\n    const rectangleButton = document.getElementById('rectangle');\n    rectangleButton.addEventListener('click', (event) => {\n        enableRectangle(event,pdf);\n    });\n    const deleteButton = document.getElementById('deletebtn');\n    deleteButton.addEventListener('click', (event) => {\n        deleteSelectedObject(event,pdf);\n    });\n    const saveButton = document.getElementById('savebtn');\n    saveButton.addEventListener('click', (event) => {\n        savePDF(event,pdf);\n    });\n};"],"names":["changeActiveTool","event","preventDefault","element","target","hasClass","parents","first","removeClass","addClass","fileurl","window","console","log","alert","pdf","PDFAnnotate","onPageUpdated","page","oldData","newData","ready","scale","pageImageCompression","click","this","color","get","style","backgroundColor","setColor","change","font_size","val","setFontSize","document","getElementById","addEventListener","enablePencil","enableSelector","enableAddText","enableRectangle","deleteSelectedObject","savePdf","savePDF"],"mappings":";;;;;;;;;cAqCSA,iBAAiBC,OACtBA,MAAMC,qBACFC,SAAU,mBAAEF,MAAMG,QAAQC,SAAS,gBACrC,mBAAEJ,MAAMG,SACR,mBAAEH,MAAMG,QAAQE,QAAQ,gBAAgBC,4BACxC,uBAAuBC,YAAY,8BACnCL,SAASM,SAAS,+LA2EJC,UAEhBC,OAAOC,QAAQC,IAAI,wBAEnBF,OAAOG,MAAM,6BAETC,IAAM,IAAIC,qBAAY,gBAAiBN,QAAS,CAChDO,cAAcC,KAAMC,QAASC,WAE7BC,UAEAC,MAAO,IACPC,qBAAsB,8BAExB,+BACI,eAAeC,OAAM,+BACjB,sBAAsBhB,YAAY,8BAClCiB,MAAMhB,SAAS,cACbiB,OAAQ,mBAAED,MAAME,IAAI,GAAGC,MAAMC,gBACjCd,IAAIe,SAASJ,8BAGf,cAAcK,QAAO,eACfC,WAAY,mBAAEP,MAAMQ,MACxBlB,IAAImB,YAAYF,iBAIHG,SAASC,eAAe,UAChCC,iBAAiB,SAAUpC,kBAnFtBA,MAAMc,KACxBd,MAAMC,iBACNF,iBAAiBC,OACjBc,IAAIuB,eAiFAA,CAAarC,MAAMc,QAEAoB,SAASC,eAAe,UAChCC,iBAAiB,SAAUpC,kBAnGtBA,MAAMc,KAC1Bd,MAAMC,iBACNF,iBAAiBC,OACjBc,IAAIwB,iBAiGAA,CAAetC,MAAMc,QAEHoB,SAASC,eAAe,QAChCC,iBAAiB,SAAUpC,kBA/EtBA,MAAMc,KACzBd,MAAMC,iBACNF,iBAAiBC,OACjBc,IAAIyB,gBA6EAA,CAAcvC,MAAMc,QAEAoB,SAASC,eAAe,aAChCC,iBAAiB,SAAUpC,kBAvEtBA,MAAMc,KAC3Bd,MAAMC,iBACNF,iBAAiBC,OACjBc,IAAI0B,kBAqEAA,CAAgBxC,MAAMc,QAELoB,SAASC,eAAe,aAChCC,iBAAiB,SAAUpC,kBA/DdA,MAAMc,KAChCd,MAAMC,iBACNa,IAAI2B,uBA8DAA,CAAqBzC,MAAMc,QAEZoB,SAASC,eAAe,WAChCC,iBAAiB,SAAUpC,kBAxDzBA,MAAMc,KACnBd,MAAMC,iBACNa,IAAI4B,UAuDAC,CAAQ3C,MAAMc"}